# Licensed under the MIT License
# https://github.com/craigahobbs/bare-script/blob/main/LICENSE

include '../qrcode.bare'
include '../unittest.bare'
include '../unittestMock.bare'


function testQrcodeNumeric():
    unittestDeepEqual( \
        qrcodeMatrix('0123456789'), \
        [ \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1], \
            [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0], \
            [1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1], \
            [1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1], \
            [1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1], \
            [1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0], \
            [0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1], \
            [0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0], \
            [1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 0], \
            [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0], \
            [1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1], \
            [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0], \
            [1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1] \
        ] \
    )
endfunction
unittestRunTest('testQrcodeNumeric')


function testQrcodeAlphanumeric():
    unittestDeepEqual( \
        qrcodeMatrix('HELLO WORLD'), \
        [ \
            [1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1], \
            [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
            [1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0], \
            [1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0], \
            [1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0], \
            [0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1], \
            [0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1], \
            [0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1], \
            [1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0], \
            [0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1], \
            [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1] \
        ] \
    )
endfunction
unittestRunTest('testQrcodeAlphanumeric')


function testQrcodeBinary():
    unittestDeepEqual( \
        qrcodeMatrix('https://craigahobbs.github.io'), \
        [ \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1], \
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0], \
            [1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 1], \
            [1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0], \
            [1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0], \
            [0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0], \
            [0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1], \
            [0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1], \
            [0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0], \
            [1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1], \
            [0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1], \
            [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1] \
        ] \
    )
endfunction
unittestRunTest('testQrcodeBinary')


function testQrcodeVersion():
    unittestDeepEqual( \
        qrcodeMatrix(stringRepeat('abcdefghij', 5), 'high'), \
        [ \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1], \
            [1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1], \
            [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0], \
            [0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1], \
            [0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1], \
            [0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0], \
            [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0], \
            [1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1], \
            [1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1], \
            [1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0], \
            [0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0], \
            [0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1], \
            [0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0], \
            [0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1], \
            [0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0], \
            [0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1], \
            [0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0], \
            [0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1], \
            [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0], \
            [0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0], \
            [0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1], \
            [1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1], \
            [1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1], \
            [0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1], \
            [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0], \
            [0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0], \
            [1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1], \
            [1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1], \
            [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0], \
            [0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0], \
            [1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0], \
            [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1], \
            [1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0], \
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1], \
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0], \
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0], \
            [1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0] \
        ] \
    )
endfunction
unittestRunTest('testQrcodeVersion')


function testQrcodeMessageTooLong():
    unittestMockAll()
    unittestDeepEqual(qrcodeMatrix(stringRepeat('abcdefghij', 70)), null)
    unittestDeepEqual( \
        unittestMockEnd(), \
        [ \
            ['systemLogDebug', ['qrcode.bare: qrcodeMatrix - Message too long (700)']] \
        ] \
    )
endfunction
unittestRunTest('testQrcodeMessageTooLong')


function testQrcodeModeNumericBits():
    unittestDeepEqual( \
        qrcodeModeNumericBits('0123456'), \
        [0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0] \
    )
    unittestDeepEqual( \
        qrcodeModeNumericBits('01234567'), \
        [0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1] \
    )
endfunction
unittestRunTest('testQrcodeModeNumericBits')


function testQrcodeModeAlphanumericBits():
    unittestDeepEqual( \
        qrcodeModeAlphanumericBits('HELLO WORLD'), \
        [ \
            0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, \
            0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1 \
        ] \
    )
endfunction
unittestRunTest('testQrcodeModeAlphanumericBits')


function testQrcodeBytesToBits():
    unittestDeepEqual( \
        qrcodeBytesToBits([163]), \
        [1, 0, 1, 0, 0, 0, 1, 1] \
    )
    unittestDeepEqual( \
        qrcodeBytesToBits([0]), \
        [0, 0, 0, 0, 0, 0, 0, 0] \
    )
    bytes = [132, 33]
    unittestDeepEqual( \
        qrcodeBytesToBits(bytes), \
        [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1] \
    )
endfunction
unittestRunTest('testQrcodeBytesToBits')


function testQrcodeBitsToBytes():
    unittestDeepEqual( \
        qrcodeBitsToBytes([1, 0, 1, 0, 0, 0, 1, 1]), \
        [163] \
    )
    unittestDeepEqual( \
        qrcodeBitsToBytes([0, 0, 0]), \
        [0] \
    )
    unittestDeepEqual( \
        qrcodeBitsToBytes([1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0]), \
        [163, 128] \
    )
endfunction
unittestRunTest('testQrcodeBitsToBytes')


function testQrcodeMatrixPenalty():
    # Test matrix with no penalties (all zeros, penalty should be 178)
    matrixZero = [ \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0] \
    ]
    unittestDeepEqual(qrcodeMatrixPenalty(matrixZero), 178)

    # Test matrix with 5 consecutive 1s in a row (penalty 1: 111)
    matrixRow = [ \
        [1, 1, 1, 1, 1], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0] \
    ]
    unittestDeepEqual(qrcodeMatrixPenalty(matrixRow), 111)

    # Test matrix with 5 consecutive 1s in a column (penalty 1: 111)
    matrixCol = [ \
        [1, 0, 0, 0, 0], \
        [1, 0, 0, 0, 0], \
        [1, 0, 0, 0, 0], \
        [1, 0, 0, 0, 0], \
        [1, 0, 0, 0, 0] \
    ]
    unittestDeepEqual(qrcodeMatrixPenalty(matrixCol), 111)

    # Test matrix with 2x2 blocks of same color (penalty 2: 117)
    matrixBlock = [ \
        [1, 1, 0, 0, 0], \
        [1, 1, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0] \
    ]
    unittestDeepEqual(qrcodeMatrixPenalty(matrixBlock), 117)

    # Test matrix with finder-like patterns (penalty 3: 593)
    matrixFinder = [ \
        [1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] \
    ]
    unittestDeepEqual(qrcodeMatrixPenalty(matrixFinder), 593)

    # Test penalty 4: proportion of dark modules (for 5x5 matrix with 1 dark module, ~20% dark)
    # Penalty 4 is |prevMultiple - 50| / 5 * 10, where prevMultiple is floor(20/5)*5 = 20, so |20-50|/5 *10 = 30/5*10=60
    matrixDark = [ \
        [1, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0], \
        [0, 0, 0, 0, 0] \
    ]
    unittestDeepEqual(qrcodeMatrixPenalty(matrixDark), 159)
endfunction
unittestRunTest('testQrcodeMatrixPenalty')


function testQrcodeRSEncode():
    bytesIn = stringEncode('Hello, World!')
    unittestDeepEqual( \
        bytesIn, \
        [72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33] \
    )

    # numCodewords = 10
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 10), \
        [172, 22, 204, 45, 215, 153, 227, 60, 191, 88] \
    )

    # numCodewords = 15
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 15), \
        [224, 116, 177, 23, 92, 112, 111, 229, 154, 91, 93, 114, 138, 118, 171] \
    )

    # numCodewords = 16
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 16), \
        [237, 245, 44, 134, 56, 122, 122, 151, 37, 228, 236, 136, 183, 203, 75, 162] \
    )

    # numCodewords = 18
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 18), \
        [112, 154, 202, 87, 193, 55, 142, 164, 26, 12, 209, 144, 48, 167, 142, 4, 101, 169] \
    )

    # numCodewords = 20
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 20), \
        [13, 235, 115, 101, 139, 92, 41, 16, 181, 51, 212, 187, 161, 226, 79, 254, 3, 223, 85, 161] \
    )

    # numCodewords = 22
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 22), \
        [249, 149, 64, 177, 251, 87, 29, 111, 62, 37, 170, 83, 34, 142, 213, 253, 138, 249, 195, 136, 22, 38] \
    )

    # numCodewords = 24
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 24), \
        [255, 117, 59, 70, 37, 99, 66, 28, 96, 195, 207, 87, 80, 138, 154, 195, 209, 103, 71, 73, 143, 254, 129, 50] \
    )

    # numCodewords = 26
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 26), \
        [240, 178, 97, 222, 50, 51, 105, 116, 167, 61, 117, 160, 118, 89, 253, 208, 12, 35, 212, 128, 79, 165, 218, 165, 115, 28] \
    )

    # numCodewords = 28
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 28), \
        [165, 217, 137, 77, 131, 155, 58, 119, 199, 163, 36, 147, 242, 184, 216, 101, 44, 92, 126, 242, 170, 27, 118, 212, 215, 139, 79, 24] \
    )

    # numCodewords = 30
    unittestDeepEqual( \
        qrcodeRSEncode(bytesIn, 30), \
        [227, 122, 194, 17, 62, 217, 184, 169, 219, 77, 171, 66, 178, 36, 60, 220, 154, 134, 215, 172, 183, 41, 110, 208, 25, 179, 1, 96, 134, 146] \
    )
endfunction
unittestRunTest('testQrcodeRSEncode')


function testQrcodeRSEncodeValidateTables():
    missingNumCodewords = {}
    levels = ['low', 'medium', 'quartile', 'high']
    for qrcode in qrcodeVersions:
        for level in levels:
            ecLevel = objectGet(qrcode, level)
            errorCodewordsPerBlockStr = stringNew(objectGet(ecLevel, 'errorCodewordsPerBlock'))
            if(!objectHas(qrcodeRSGeneratorPolynomials, errorCodewordsPerBlockStr), \
                objectSet(missingNumCodewords, errorCodewordsPerBlockStr, true)\
            )
        endfor
    endfor
    unittestDeepEqual(arraySort(objectKeys(missingNumCodewords)), [])
endfunction
unittestRunTest('testQrcodeRSEncodeValidateTables')


function testQrcodeDraw():
    unittestMockAll()

    size = 100
    drawNew(size, size)
    qrcodeDraw('HELLO WORLD', 0, 0, size)

    unittestDeepEqual( \
        unittestMockEnd(), \
        [ \
            ["drawNew", [100, 100]], \
            ["drawStyle", ["none", 0, "white"]], \
            ["drawRect", [0, 0, 100, 100]], \
            ["drawStyle", ["none", 0, "black"]], \
            ["drawPathRect", [12.121212, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [15.151515, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [27.272727, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [54.545455, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [66.666667, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [69.69697, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [81.818182, 12.121212, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 12.121212, 3.030303, 3.030303]], \
            ["drawPathRect", [12.121212, 15.151515, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 15.151515, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 15.151515, 3.030303, 3.030303]], ["drawPathRect", [51.515152, 15.151515, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 15.151515, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 15.151515, 3.030303, 3.030303]], \
            ["drawPathRect", [12.121212, 18.181818, 3.030303, 3.030303]], ["drawPathRect", [18.181818, 18.181818, 3.030303, 3.030303]], \
            ["drawPathRect", [21.212121, 18.181818, 3.030303, 3.030303]], ["drawPathRect", [24.242424, 18.181818, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 18.181818, 3.030303, 3.030303]], ["drawPathRect", [36.363636, 18.181818, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 18.181818, 3.030303, 3.030303]], ["drawPathRect", [57.575758, 18.181818, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 18.181818, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 18.181818, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 18.181818, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 18.181818, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 18.181818, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 21.212121, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 21.212121, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 21.212121, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 21.212121, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 21.212121, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 21.212121, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 21.212121, 3.030303, 3.030303]], \
            ["drawPathRect", [51.515152, 21.212121, 3.030303, 3.030303]], ["drawPathRect", [60.606061, 21.212121, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 21.212121, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 21.212121, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 21.212121, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 21.212121, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 21.212121, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 24.242424, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 24.242424, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 24.242424, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 24.242424, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 24.242424, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 24.242424, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 24.242424, 3.030303, 3.030303]], \
            ["drawPathRect", [51.515152, 24.242424, 3.030303, 3.030303]], ["drawPathRect", [60.606061, 24.242424, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 24.242424, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 24.242424, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 24.242424, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 24.242424, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 24.242424, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 27.272727, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 27.272727, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 27.272727, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 27.272727, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 27.272727, 3.030303, 3.030303]], \
            ["drawPathRect", [54.545455, 27.272727, 3.030303, 3.030303]], ["drawPathRect", [57.575758, 27.272727, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 27.272727, 3.030303, 3.030303]], ["drawPathRect", [66.666667, 27.272727, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 27.272727, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [15.151515, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [18.181818, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [21.212121, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [24.242424, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [27.272727, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [48.484848, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [54.545455, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [66.666667, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [69.69697, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [81.818182, 30.30303, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 30.30303, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 33.333333, 3.030303, 3.030303]], ["drawPathRect", [45.454545, 33.333333, 3.030303, 3.030303]], \
            ["drawPathRect", [57.575758, 33.333333, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 36.363636, 3.030303, 3.030303]], \
            ["drawPathRect", [15.151515, 36.363636, 3.030303, 3.030303]], ["drawPathRect", [18.181818, 36.363636, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 36.363636, 3.030303, 3.030303]], ["drawPathRect", [27.272727, 36.363636, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 36.363636, 3.030303, 3.030303]], ["drawPathRect", [33.333333, 36.363636, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 36.363636, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 36.363636, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 36.363636, 3.030303, 3.030303]], ["drawPathRect", [63.636364, 36.363636, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 36.363636, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 36.363636, 3.030303, 3.030303]], \
            ["drawPathRect", [12.121212, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [27.272727, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [33.333333, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [36.363636, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [45.454545, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [48.484848, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [51.515152, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [57.575758, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [60.606061, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [63.636364, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 39.393939, 3.030303, 3.030303]], ["drawPathRect", [81.818182, 39.393939, 3.030303, 3.030303]], \
            ["drawPathRect", [12.121212, 42.424242, 3.030303, 3.030303]], ["drawPathRect", [24.242424, 42.424242, 3.030303, 3.030303]], \
            ["drawPathRect", [27.272727, 42.424242, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 42.424242, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 42.424242, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 42.424242, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 42.424242, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 42.424242, 3.030303, 3.030303]], \
            ["drawPathRect", [54.545455, 42.424242, 3.030303, 3.030303]], ["drawPathRect", [57.575758, 42.424242, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 42.424242, 3.030303, 3.030303]], ["drawPathRect", [66.666667, 42.424242, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 42.424242, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 42.424242, 3.030303, 3.030303]], \
            ["drawPathRect", [15.151515, 45.454545, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 45.454545, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 45.454545, 3.030303, 3.030303]], ["drawPathRect", [33.333333, 45.454545, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 45.454545, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 45.454545, 3.030303, 3.030303]], \
            ["drawPathRect", [48.484848, 45.454545, 3.030303, 3.030303]], ["drawPathRect", [51.515152, 45.454545, 3.030303, 3.030303]], \
            ["drawPathRect", [54.545455, 45.454545, 3.030303, 3.030303]], ["drawPathRect", [60.606061, 45.454545, 3.030303, 3.030303]], \
            ["drawPathRect", [72.727273, 45.454545, 3.030303, 3.030303]], ["drawPathRect", [75.757576, 45.454545, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 45.454545, 3.030303, 3.030303]], ["drawPathRect", [15.151515, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [21.212121, 48.484848, 3.030303, 3.030303]], ["drawPathRect", [24.242424, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 48.484848, 3.030303, 3.030303]], ["drawPathRect", [36.363636, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [42.424242, 48.484848, 3.030303, 3.030303]], ["drawPathRect", [45.454545, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [54.545455, 48.484848, 3.030303, 3.030303]], ["drawPathRect", [57.575758, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 48.484848, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 48.484848, 3.030303, 3.030303]], ["drawPathRect", [78.787879, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [81.818182, 48.484848, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 48.484848, 3.030303, 3.030303]], \
            ["drawPathRect", [15.151515, 51.515152, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 51.515152, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 51.515152, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 51.515152, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 51.515152, 3.030303, 3.030303]], ["drawPathRect", [54.545455, 51.515152, 3.030303, 3.030303]], \
            ["drawPathRect", [57.575758, 51.515152, 3.030303, 3.030303]], ["drawPathRect", [69.69697, 51.515152, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 51.515152, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 54.545455, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 54.545455, 3.030303, 3.030303]], ["drawPathRect", [27.272727, 54.545455, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 54.545455, 3.030303, 3.030303]], ["drawPathRect", [36.363636, 54.545455, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 54.545455, 3.030303, 3.030303]], ["drawPathRect", [51.515152, 54.545455, 3.030303, 3.030303]], \
            ["drawPathRect", [63.636364, 54.545455, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 54.545455, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 54.545455, 3.030303, 3.030303]], ["drawPathRect", [15.151515, 57.575758, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 57.575758, 3.030303, 3.030303]], ["drawPathRect", [27.272727, 57.575758, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 57.575758, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 57.575758, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 57.575758, 3.030303, 3.030303]], ["drawPathRect", [57.575758, 57.575758, 3.030303, 3.030303]], \
            ["drawPathRect", [63.636364, 57.575758, 3.030303, 3.030303]], ["drawPathRect", [66.666667, 57.575758, 3.030303, 3.030303]], \
            ["drawPathRect", [75.757576, 57.575758, 3.030303, 3.030303]], ["drawPathRect", [81.818182, 57.575758, 3.030303, 3.030303]], \
            ["drawPathRect", [12.121212, 60.606061, 3.030303, 3.030303]], ["drawPathRect", [18.181818, 60.606061, 3.030303, 3.030303]], \
            ["drawPathRect", [21.212121, 60.606061, 3.030303, 3.030303]], ["drawPathRect", [24.242424, 60.606061, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 60.606061, 3.030303, 3.030303]], ["drawPathRect", [36.363636, 60.606061, 3.030303, 3.030303]], \
            ["drawPathRect", [42.424242, 60.606061, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 60.606061, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 60.606061, 3.030303, 3.030303]], ["drawPathRect", [63.636364, 60.606061, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 60.606061, 3.030303, 3.030303]], ["drawPathRect", [69.69697, 60.606061, 3.030303, 3.030303]], \
            ["drawPathRect", [72.727273, 60.606061, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 60.606061, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 63.636364, 3.030303, 3.030303]], ["drawPathRect", [39.393939, 63.636364, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 63.636364, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 63.636364, 3.030303, 3.030303]], \
            ["drawPathRect", [51.515152, 63.636364, 3.030303, 3.030303]], ["drawPathRect", [57.575758, 63.636364, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 63.636364, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 63.636364, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 63.636364, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 63.636364, 3.030303, 3.030303]], \
            ["drawPathRect", [12.121212, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [15.151515, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [27.272727, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [36.363636, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [45.454545, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [48.484848, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [54.545455, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [66.666667, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [72.727273, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [75.757576, 66.666667, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 66.666667, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 69.69697, 3.030303, 3.030303]], \
            ["drawPathRect", [30.30303, 69.69697, 3.030303, 3.030303]], ["drawPathRect", [36.363636, 69.69697, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 69.69697, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 69.69697, 3.030303, 3.030303]], \
            ["drawPathRect", [51.515152, 69.69697, 3.030303, 3.030303]], ["drawPathRect", [54.545455, 69.69697, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 69.69697, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 69.69697, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 69.69697, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [54.545455, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [57.575758, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [60.606061, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [63.636364, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [66.666667, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [69.69697, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [81.818182, 72.727273, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 72.727273, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 75.757576, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 75.757576, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 75.757576, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 75.757576, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 75.757576, 3.030303, 3.030303]], \
            ["drawPathRect", [39.393939, 75.757576, 3.030303, 3.030303]], ["drawPathRect", [42.424242, 75.757576, 3.030303, 3.030303]], \
            ["drawPathRect", [45.454545, 75.757576, 3.030303, 3.030303]], ["drawPathRect", [54.545455, 75.757576, 3.030303, 3.030303]], \
            ["drawPathRect", [57.575758, 75.757576, 3.030303, 3.030303]], ["drawPathRect", [60.606061, 75.757576, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 75.757576, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 75.757576, 3.030303, 3.030303]], \
            ["drawPathRect", [81.818182, 75.757576, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 78.787879, 3.030303, 3.030303]], \
            ["drawPathRect", [18.181818, 78.787879, 3.030303, 3.030303]], ["drawPathRect", [21.212121, 78.787879, 3.030303, 3.030303]], \
            ["drawPathRect", [24.242424, 78.787879, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 78.787879, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 78.787879, 3.030303, 3.030303]], ["drawPathRect", [39.393939, 78.787879, 3.030303, 3.030303]], \
            ["drawPathRect", [51.515152, 78.787879, 3.030303, 3.030303]], ["drawPathRect", [57.575758, 78.787879, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 78.787879, 3.030303, 3.030303]], ["drawPathRect", [72.727273, 78.787879, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 78.787879, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 78.787879, 3.030303, 3.030303]], \
            ["drawPathRect", [12.121212, 81.818182, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 81.818182, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 81.818182, 3.030303, 3.030303]], ["drawPathRect", [39.393939, 81.818182, 3.030303, 3.030303]], \
            ["drawPathRect", [42.424242, 81.818182, 3.030303, 3.030303]], ["drawPathRect", [45.454545, 81.818182, 3.030303, 3.030303]], \
            ["drawPathRect", [63.636364, 81.818182, 3.030303, 3.030303]], ["drawPathRect", [69.69697, 81.818182, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 81.818182, 3.030303, 3.030303]], ["drawPathRect", [81.818182, 81.818182, 3.030303, 3.030303]], \
            ["drawPathRect", [84.848485, 81.818182, 3.030303, 3.030303]], ["drawPathRect", [12.121212, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [15.151515, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [18.181818, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [21.212121, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [24.242424, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [27.272727, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [30.30303, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [36.363636, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [48.484848, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [60.606061, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [63.636364, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [66.666667, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [69.69697, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [72.727273, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [75.757576, 84.848485, 3.030303, 3.030303]], \
            ["drawPathRect", [78.787879, 84.848485, 3.030303, 3.030303]], ["drawPathRect", [84.848485, 84.848485, 3.030303, 3.030303]] \
        ] )
endfunction
unittestRunTest('testQrcodeDraw')
